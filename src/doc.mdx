---
route: /
name: Dou
---

import {Playground, PropsTable} from 'docz';
import styled, {css} from 'styled-components';
import {DouProvider, DouFunctionsConsumer, Dou, withDou, Background, Box} from '.';
import {MdAccessible} from 'react-icons/md'
import en from './locales/en';

## 日本語

<Playground>
	{() => {
		const callback = (keyName, buttonIndex, sendingValue) => {
			console.log('keyName: ', keyName, 'buttonIndex: ', buttonIndex, 'sendingValue: ', sendingValue);
		}

		return (
			<DouProvider callback={callback}>
				<DouFunctionsConsumer>
					{({ask}) => {
						return (
							<>
								<p>
									<button onClick={ask('1', 'ハンバーガー食べますか？', {id: 123})}>ハンバーガー食べますか？</button>
								</p>
								<p>
									<button onClick={ask('2', '映画見ますか？', {value: 'hoge'})}>映画見ますか？</button>
								</p>
								<p>
									<button onClick={ask('3', '帰りますか？', {valid: true})}>帰りますか？</button>
								</p>
								<p>
									<button onClick={ask('4', (
										<div style={{width: '100%', textALign: 'left'}}>
											<p>帰りたい</p>
											<p>帰りたい</p>
											<p>帰りたい</p>
											<p>帰りたい</p>
											<p>帰りたい</p>
										</div>
									), 'foo')}>帰りたい</button>
								</p>
								<Dou keyName="2" />
								<Dou keyName="4" items={[
									{label: '帰りたい1', primary: true},
									{label: '帰りたい2', button: true, primary: true},
									{label: '帰りたい3'},
									{label: '帰りたい4', button: true},
								]} />
							</>
						)
					}}
				</DouFunctionsConsumer>
				<Dou keyName="1" onClickItem={(buttonIndex, sendingValue) => {
					console.log('buttonIndex: ', buttonIndex, 'sendingValue: ', sendingValue);
				}} />
				<Dou keyName="3" items={[
					{icon: <MdAccessible />, label: '帰1', primary: true},
					{icon: <MdAccessible />, label: '帰2', button: true, primary: true},
					{icon: <MdAccessible />, label: '帰3'},
					{icon: <MdAccessible />, label: '帰4', button: true},
				]} />
			</DouProvider>
		)
	}}
</Playground>

<Playground>
	{() => {
		Dou.Box = styled(Box)`
			background: #393939;
			color: #fff;
			transition: none !important;
		`;

		return (
			<DouProvider>
				<p>
					<DouFunctionsConsumer>
						{({ask}) => {
							return <button onClick={ask('foo?', 'foo?')}>foo?</button>
						}}
					</DouFunctionsConsumer>
				</p>

				<Dou keyName="foo?" onClickItem={(buttonIndex, sendingValue) => {
					console.log('buttonIndex: ', buttonIndex, 'sendingValue: ', sendingValue);
				}} />
			</DouProvider>
		)
	}}
</Playground>

<Playground>
	{() => {
		Dou.resetGlobalComponents();

		return (
			<DouProvider>
				<p>
					<DouFunctionsConsumer>
						{({ask}) => {
							return <button onClick={ask('bar?', 'bar?')}>bar?</button>
						}}
					</DouFunctionsConsumer>
				</p>

				<Dou keyName="bar?" onClickItem={(buttonIndex, sendingValue) => {
					console.log('buttonIndex: ', buttonIndex, 'sendingValue: ', sendingValue);
				}} components={{
					Background: styled(Background)`
						transition: none !important;

						&:before {
							transition: none !important;
						}
					`,
					Box: styled(Box)`
						transition: none !important;
					`
				}} />
			</DouProvider>
		)
	}}
</Playground>

## English

<Playground>
	{() => {
		const callback = buttonIndex => {
			if (buttonIndex === 0) {
				console.log('primary button clicked');
			} else {
				console.log('normal button clicked');
			}
		}

		return (
			<DouProvider callback={callback}>
				<DouFunctionsConsumer>
					{({ask}) => {
						return (
							<>
								<button onClick={ask('1', 'Eat hamburgers?')}>Eat hamburgers?</button>
								<Dou keyName="1" locale={en} />
							</>
						)
					}}
				</DouFunctionsConsumer>
			</DouProvider>
		)
	}}
</Playground>

## withDou

<Playground>
	{() => {
		const callback = buttonIndex => {
			if (buttonIndex === 0) {
				console.log('primary button clicked');
			} else {
				console.log('normal button clicked');
			}
		}

		class Child extends React.Component {
			render() {
				return <button onClick={this.props.dou.ask('1', 'ハンバーガー食べますか？')}>ハンバーガー食べますか？</button>
			}
		}

		const ChildWithDou = withDou(Child);

		return (
			<DouProvider callback={callback}>
				<ChildWithDou />
				<Dou keyName="1" />
			</DouProvider>
		)
	}}
</Playground>
